<!-- Voting page -->

<!DOCTYPE html>
<html>
<head>
<title>
</head>
</title>
<body>
<h1 style="font-family:Comic Sans Ms;text-align="center";font-size:20pt;
color:#00FF00;>
Vote for preferred price, type of food, and location from the choices below:
</h1>

<!-- Begin Yelp Badge - get your own at http://www.yelp.com/bling -->
<div style="line-height: 1px; font-family: Helvetica, arial, sans-serif; text-align: center; font-size: 12px;"><div style="width: 350px;overflow: hidden;line-height: 100%;height: 40px;background-image: url(http://embed.yelpcdn.com/bling_borders?color=C41200&amp;width=350&amp;BGcolor=CCCCCC&amp;position=top&amp;height=40);"><a href="http://www.yelp.com"><img src="http://embed.yelpcdn.com/assets/2/www/img/325472601571/p.gif" style="height: 20px;width: 40px;margin-top: 2px;border: none;margin-left: 155;" alt=""></a><div style="text-align:center"><a href="http://www.yelp.com/user_details?userid=tVzRazhbqEw-QXYOAINgJg" style="color: #FFFFFF; overflow: hidden; text-overflow: ellipsis; display: block; width: 90%; margin: 0 5%; white-space: nowrap;">Recent reviews by Sheera G.</a></div></div>
<iframe width="350" height="295" frameborder="0" scrolling="no" src="http://www.yelp.com/blogbadgemap?v=2&amp;userid=tVzRazhbqEw-QXYOAINgJg&amp;width=350&amp;height=295&amp;uicolor=C41200&amp;textcolor=FFFFFF&amp;type=latest&amp;speed=5"></iframe>
<div style="width: 350px;overflow: hidden;line-height: 100%;height: 15px;background-image: url(http://embed.yelpcdn.com/bling_borders?color=C41200&amp;width=350&amp;BGcolor=CCCCCC&amp;position=bottom&amp;height=15);"><a href="http://www.yelp.com/bling" style="color: #FFFFFF;">What's this?</a></div></div>
<!-- End Yelp Badge - get your own at http://www.yelp.com/bling -->


<script type="text/javascript">

  var auth = {
  //
  // Update with your auth tokens.
  //
  consumerKey: "9XwSOWPHKdgOU9hXNlw7hQ",
  consumerSecret: "19coOfl3ywqwnmjhrNn_wkDAzuA",
  accessToken: "gbaIzI_LWS4BfBCkNoyJsOCZ2fYCtjrI",
  accessTokenSecret: "tBkK2tawtmUVvi14zd7993m4jTg",
  serviceProvider: {
    signatureMethod: "HMAC-SHA1"
  }
};

var terms = 'food';
var near = 'San+Francisco';

var near=prompt("Please enter the city","San+Francisco");

var accessor = {
  consumerSecret: auth.consumerSecret,
  tokenSecret: auth.accessTokenSecret
};

parameters = [];
parameters.push(['term', terms]);
parameters.push(['location', near]);
parameters.push(['callback', 'cb']);
parameters.push(['oauth_consumer_key', auth.consumerKey]);
parameters.push(['oauth_consumer_secret', auth.consumerSecret]);
parameters.push(['oauth_token', auth.accessToken]);
parameters.push(['oauth_signature_method', 'HMAC-SHA1']);

var message = {
  'action': 'http://api.yelp.com/v2/search',
  'method': 'GET',
  'parameters': parameters
};

OAuth.setTimestampAndNonce(message);
OAuth.SignatureMethod.sign(message, accessor);

var parameterMap = OAuth.getParameterMap(message.parameters);
parameterMap.oauth_signature = OAuth.percentEncode(parameterMap.oauth_signature)
console.log(parameterMap);

var bestRestaurant = "Some random restaurant";

$.ajax({
  'url': message.action,
  'data': parameterMap,
  'cache': true,
  'dataType': 'jsonp',
  'jsonpCallback': 'cb',
  'success': function(data, textStats, XMLHttpRequest) {
    console.log(data);
    var output = prettyPrint(data);

document.write("<h1>The 3 best restaurants are listed for the following city: </h1>");
document.write("<h1>");
document.write(near);
document.write("<\h1>");
var i;
for(i=0; i<=10; i= i+1){
        document.write("<p>");  
        document.write(data.businesses[i].name);
        document.write("   Rated   ");
        document.write(data.businesses[i].rating);
        document.write("      ");
        document.write(data.businesses[i].phone);
        document.write("<\p>");  
   }

  }
});


</body>
</html>